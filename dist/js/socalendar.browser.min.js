"use strict";var soCalendar=(()=>{var D=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var A=(v,a)=>{for(var e in a)D(v,e,{get:a[e],enumerable:!0})},I=(v,a,e,t)=>{if(a&&typeof a=="object"||typeof a=="function")for(let n of N(a))!P.call(v,n)&&n!==e&&D(v,n,{get:()=>a[n],enumerable:!(t=S(a,n))||t.enumerable});return v};var F=v=>I(D({},"__esModule",{value:!0}),v);var Z={};A(Z,{soCalendar:()=>f});var f=class v{constructor(a={}){this.date=new Date;this.today=new Date;this.referenceDate=new Date(1970,0,4);this.year=new Date().getFullYear();this.month=new Date().getMonth();this.day=new Date().getDay();this.selector=".date-picker";this.dateRestrictions=/[0-9\/-]/g;this.applyMask=a=>{let e=document.getElementById("soCalendar-date-confirm"),t="00/00/0000",n=a.target;if(!(n instanceof HTMLInputElement))return;let s=n.value,l=s.replace(/[^a-zA-Z0-9]/g,"");if(s.trim()==="")return;let c="",r=n.selectionStart||0,d=0;for(let o=0;o<t.length&&!(d>=l.length);o++){let h=l[d];if(t[o]!=="0"&&t[o]!=="A"){c+=t[o];continue}if(t[o]==="0"&&!/\d/.test(h)||t[o]==="A"&&!/[a-zA-Z]/.test(h))break;c+=l[d++];let y=t[o+1];y&&y!=="0"&&y!=="A"&&(c+=y,o++)}n.value=c;let u=c[r-1];if(t[r]!="0"&&t[r]!="A"&&r++,c.length>r)for(;!/\d/.test(u)&&!/[a-zA-Z]/.test(u);)u=c[r-1],r++;n.setSelectionRange(r,r),e.disabled=c.length!==t.length};let e={...v.DEFAULTS,...a};Object.assign(this,e),this.generateWeekDays();let t=document.createElement("dialog");t.id="soCalendar",t.classList.add("socalendar"),t.dataset.socalendarView="date",t.innerHTML=` 
      <div class="socalendar-inner">
        <div class="socalendar-row">
          <div class="socalendar-label-prev">
            <button id="soCalendar-back" class="socalendar-button socalendar-back" type="button">${this.iconBack}</button>
            <button id="soCalendar-prev-year" class="socalendar-button socalendar-prev-year" type="button">${this.iconPreviousYear}</button>
            <button id="soCalendar-prev-month" class="socalendar-button socalendar-prev-month" type="button">${this.iconPreviousMonth}</button>
          </div>
          <div class="socalendar-label">
            <button id="soCalendar-label-month" class="socalendar-button-label socalendar-label-month" type="button">
              <span data-before="${this.getMonthName(this.date.getMonth()-1,"short")}" data-after="${this.getMonthName(this.date.getMonth()+1,"short")}">${this.getMonthName(this.date.getMonth(),"short")}</span>
            </button>
            <button id="soCalendar-label-year" class="socalendar-button-label socalendar-label-year" type="button">
              <span data-before="${this.year-1}" data-after="${this.year+1}">${this.year}</span>
            </button>
            </div>
            <div class="socalendar-label-next">
            <button id="soCalendar-edit" class="socalendar-button socalendar-edit" type="button">${this.iconEdit}</button>
            <button id="soCalendar-next-month" class="socalendar-button socalendar-next-month" type="button">${this.iconNextMonth}</button>
            <button id="soCalendar-next-year" class="socalendar-button socalendar-next-year" type="button">${this.iconNextYear}</button>
          </div>
        </div>
        <div class="socalendar-content-wrapper">
          <div id="soCalendar-content" class="socalendar-content-inner" aria-live="polite">
            <div id="soCalendar-content-prev" class="socalendar-content"></div>
            <div id="soCalendar-content-current" class="socalendar-content"></div>
            <div id="soCalendar-content-next" class="socalendar-content"></div>
          </div>
        </div>
        <div id="soCalendar-footer" class="socalendar-row">
          <button id="soCalendar-cancel" class="socalendar-button socalendar-cancel" type="button">${this.iconCancel}</button>
          <button id="soCalendar-today" class="socalendar-button socalendar-today" type="button" disabled>${this.iconToday}</button>
          <button id="soCalendar-confirm" class="socalendar-button socalendar-confirm" type="button">${this.iconConfirm}</button>
        </div>
      </div>`,document.body.appendChild(t),this.dialog=t,this.content=t.querySelector("#soCalendar-content"),this.contentPrev=t.querySelector("#soCalendar-content-prev"),this.contentCurrent=t.querySelector("#soCalendar-content-current"),this.contentNext=t.querySelector("#soCalendar-content-next"),this.monthLabel=t.querySelector("#soCalendar-label-month"),this.yearLabel=t.querySelector("#soCalendar-label-year"),this.todayBtn=t.querySelector("#soCalendar-today"),this.prevMonthBtn=t.querySelector("#soCalendar-prev-month"),this.nextMonthBtn=t.querySelector("#soCalendar-next-month"),this.prevYearBtn=t.querySelector("#soCalendar-prev-year"),this.nextYearBtn=t.querySelector("#soCalendar-next-year"),this.backBtn=t.querySelector("#soCalendar-back"),this.editBtn=t.querySelector("#soCalendar-edit"),this.cancelBtn=t.querySelector("#soCalendar-cancel"),this.confirmBtn=t.querySelector("#soCalendar-confirm"),this.addListeners()}static{this.DEFAULTS={iconPreviousMonth:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"></path></svg>',iconNextMonth:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"></path></svg>',iconPreviousYear:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M197.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L123.31,128ZM72,40a8,8,0,0,0-8,8V208a8,8,0,0,0,16,0V48A8,8,0,0,0,72,40Z"></path></svg>',iconNextYear:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M149.66,122.34a8,8,0,0,1,0,11.32l-80,80a8,8,0,0,1-11.32-11.32L132.69,128,58.34,53.66A8,8,0,0,1,69.66,42.34ZM184,40a8,8,0,0,0-8,8V208a8,8,0,0,0,16,0V48A8,8,0,0,0,184,40Z"></path></svg>',iconEdit:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.68,147.31,64l24-24L216,84.68Z"></path></svg>',iconBack:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path></svg>',iconToday:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-64-56a16,16,0,1,1-16-16A16,16,0,0,1,144,152Z"></path></svg>',iconCancel:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path></svg>',iconConfirm:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"></path></svg>',iconPreviousDecade:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M176,128a8,8,0,0,1-8,8H88a8,8,0,0,1,0-16h80A8,8,0,0,1,176,128Zm56,0A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"></path></svg>',iconNextDecade:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"></path></svg>',selector:".date-picker",locale:"en-GB",minDate:void 0,maxDate:void 0,dateFormat:"DD/MM/YYYY",weekStartsOnMonday:!0}}getMonthName(a,e="short"){return new Intl.DateTimeFormat(this.locale,{month:e}).format(new Date(2e3,a,1))}generateWeekDays(a="narrow"){this.weekDays=[];for(let e=0;e<7;e++){let t=e;this.weekStartsOnMonday&&(t=(e+1)%7);let n=new Date(this.referenceDate);n.setDate(this.referenceDate.getDate()+t),this.weekDays.push([new Intl.DateTimeFormat(this.locale,{weekday:a}).format(n),new Intl.DateTimeFormat(this.locale,{weekday:"long"}).format(n)])}}getWeekDay(a){let[e,t]=this.weekDays[a];return`<abbr title="${t}">${e}</abbr>`}daysInMonth(a,e){return new Date(a,e+1,0).getDate()}updateMonthLabel(){this.monthLabel instanceof HTMLButtonElement&&(this.monthLabel.innerHTML=`<span 
      data-before="${this.getMonthName(this.month-1,"short")}" 
      data-after="${this.getMonthName(this.month+1,"short")}">
        ${this.getMonthName(this.month,"short")}
      </span>`)}updateMonth(a){let e=new Date(this.year,this.month+a,this.day),t=a>0?"next":"prev";this.minDate instanceof Date&&e<this.minDate||this.maxDate instanceof Date&&e>this.maxDate||(this.month+a<0?(this.month=11,this.updateYear(-1)):this.month+a>11?(this.month=0,this.updateYear(1)):this.month+=a,this.content.classList.add(t),this.monthLabel.classList.add(t))}updateYearLabel(){this.yearLabel instanceof HTMLButtonElement&&(this.yearLabel.innerHTML=`<span data-before="${this.year-1}" data-after="${this.year+1}">${this.year}</span>`)}updateYear(a){let e=a>0?"next":"prev",t=new Date(this.year+a,this.month,this.day);this.minDate instanceof Date&&t<this.minDate||this.maxDate instanceof Date&&t>this.maxDate||(this.yearLabel.classList.add(e),this.content.classList.add(e),this.year+=a,this.generateDatePicker())}updateDate(){this.todayBtn.disabled=!(this.year!=this.today.getFullYear()||this.month!=this.today.getMonth());let a=this.minDate instanceof Date?this.minDate:null,e=this.maxDate instanceof Date?this.maxDate:null,t=new Date(this.year,this.month,0),n=new Date(this.year,this.month+1,1),s=new Date(this.year-1,this.month,1),l=new Date(this.year+1,this.month,1);this.prevMonthBtn.disabled=!!a&&t<this.minDate,this.nextMonthBtn.disabled=!!e&&n>this.maxDate,this.prevYearBtn.disabled=!!a&&s<this.minDate,this.nextYearBtn.disabled=!!e&&l>this.maxDate}parseDateString(a){if(!a)return!1;let e=a.split(/[\/\-]/);if(e.length!==3)return!1;let t,n,s;switch(this.dateFormat){case"DD/MM/YYYY":t=Number(e[0]),n=Number(e[1]),s=Number(e[2]);break;case"MM/DD/YYYY":n=Number(e[0]),t=Number(e[1]),s=Number(e[2]);break;case"YYYY/MM/DD":s=Number(e[0]),n=Number(e[1]),t=Number(e[2]);break;default:return!1}if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(s)||s<1e3||s>9999||n<1||n>12||t<1||t>31)return!1;let l=new Date(s,n-1,t);return l.getFullYear()!==s||l.getMonth()!==n-1||l.getDate()!==t?!1:l}addListeners(){document.querySelectorAll(this.selector).forEach(e=>{e.addEventListener("click",t=>{let n=t.currentTarget;if(n instanceof HTMLButtonElement&&n.dataset.socalendarTarget){let s=document.getElementById(n.dataset.socalendarTarget);s instanceof HTMLInputElement?(s.classList.add("socalendar-target"),this.targetElement=s):console.log(`[soCalendar] Target element with id "${n.dataset.socalendarTarget}" not found or not an input`)}else if(n instanceof HTMLInputElement)e.classList.add("socalendar-target"),this.targetElement=n;else{console.log("[soCalendar] Button element missing data-socalendar-target attribute for target element.");return}this.targetElement.dataset.minDate?this.minDate=this.parseDateString(this.targetElement.dataset.minDate):this.minDate=!1,this.targetElement.dataset.maxDate?this.maxDate=this.parseDateString(this.targetElement.dataset.maxDate):this.maxDate=!1,this.targetElement.type==="date"&&this.targetElement.value.trim()!=""?this.date=new Date(this.targetElement.value):this.setDateString(this.targetElement.value)||(this.date=this.today),this.year=this.date.getFullYear(),this.month=this.date.getMonth(),this.day=this.date.getDate(),this.generateDatePicker(),this.updateMonthLabel(),this.updateYearLabel(),this.dialog.showModal()})}),this.dialog.addEventListener("click",e=>{let t=this.dialog.getBoundingClientRect();t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width||this.closeCalendar()}),this.content.addEventListener("transitionend",e=>{e.target===this.content&&(this.content.classList.remove("next","prev"),this.generateDatePicker())}),this.monthLabel.addEventListener("transitionend",()=>{this.monthLabel.classList.remove("next","prev"),this.updateMonthLabel()}),this.yearLabel.addEventListener("transitionend",()=>{this.yearLabel.classList.remove("next","prev"),this.updateYearLabel()}),this.backBtn.addEventListener("click",()=>{this.generateDatePicker()}),this.editBtn.addEventListener("click",()=>{this.generateDateInput()}),this.prevYearBtn.addEventListener("click",()=>{this.updateYear(-1)}),this.prevMonthBtn.addEventListener("click",()=>{this.updateMonth(-1)}),this.nextMonthBtn.addEventListener("click",()=>{this.updateMonth(1)}),this.nextYearBtn.addEventListener("click",()=>{this.updateYear(1)}),this.cancelBtn.addEventListener("click",()=>{this.closeCalendar()}),this.confirmBtn.addEventListener("click",()=>{this.closeCalendar()}),this.todayBtn.addEventListener("click",()=>{this.year=this.today.getFullYear(),this.month=this.today.getMonth(),this.day=this.today.getDate(),this.updateYearLabel(),this.updateMonthLabel(),this.generateDatePicker()}),this.monthLabel.addEventListener("click",()=>{this.generateMonthPicker()}),this.yearLabel.addEventListener("click",()=>{console.log("year picker clicked"),this.generateYearPicker()})}setDateString(a){let e=this.parseDateString(a.trim());return e instanceof Date?(this.date=e,!0):!1}setDate(a){if(this.targetElement.type==="date"){let e=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");this.targetElement.value=`${e}-${t}-${n}`}else this.targetElement.value=a.toLocaleDateString(this.locale);this.closeCalendar()}closeCalendar(){this.dialog.close()}isOpen(){return this.dialog&&this.dialog.classList.contains("socalendar-loaded")}show(){this.isOpen()||this.dialog.classList.add("socalendar-loaded")}toggleElements(a,e=!1,t="socalendar-hidden"){a.forEach(n=>{let s=document.getElementById(n);s&&s.classList.toggle(t,e)})}restrictCharacters(a,e){let t=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Backspace","Delete","Tab","Insert","Home","End","PageUp","PageDown"];if(e.key&&t.includes(e.key)||e.ctrlKey||e.metaKey)return!0;if(e.key==="Escape")return a.blur(),!1;if(!e.key.match(this.dateRestrictions))return e.preventDefault(),!1}formatDateInput(a,e="dd/MM/yyyy"){let t={dd:a.slice(0,2),MM:a.slice(2,4),yyyy:a.slice(4,8)};return e.replace("dd",t.dd||"").replace("MM",t.MM||"").replace("yyyy",t.yyyy||"").replace(/\/+/g,(n,s)=>s<a.length?n:"")}generateDateInput(){this.toggleElements(["soCalendar-back"],!1),this.toggleElements(["soCalendar-edit"],!0),this.contentCurrent.innerHTML=`
      <div class="socalendar-date-editor socalendar-row">
        <input class="socalendar-input" id="soCalendar-input" type="text" inputmode="numeric" pattern="[0-9]{4}" maxlength="10" placeholder="${this.dateFormat}" mask="0000-00-00" />
        <button type="button" disabled id="soCalendar-date-confirm" class="socalendar-input-button ">${this.iconConfirm}</button>
      </div>
    `;let a=document.getElementById("soCalendar-input"),e=document.getElementById("soCalendar-date-confirm");a instanceof HTMLInputElement&&(a.focus(),a.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),t.target instanceof HTMLInputElement&&t.target.getAttribute("mask")&&t.target.getAttribute("mask").length===t.target.value.length&&(this.setDateString(t.target.value),this.year=this.date.getFullYear(),this.month=this.date.getMonth(),this.day=this.date.getDate(),this.generateDatePicker(),this.updateMonthLabel(),this.updateYearLabel())),this.restrictCharacters(a,t)}),a.addEventListener("input",t=>this.applyMask(t)),a.addEventListener("paste",t=>this.applyMask(t))),e.addEventListener("click",t=>{alert("confirm"),this.setDateString(a.value),this.year=this.date.getFullYear(),this.month=this.date.getMonth(),this.day=this.date.getDate(),this.generateDatePicker(),this.updateMonthLabel(),this.updateYearLabel()})}generateYearPicker(a){a||(a=this.year),this.dialog.dataset.socalendarView="year",this.content.classList.remove("next","prev"),this.toggleElements(["soCalendar-back","soCalendar-edit"],!1),this.toggleElements(["soCalendar-footer","soCalendar-content-month","soCalendar-prev-year","soCalendar-prev-month","soCalendar-next-month","soCalendar-next-year"],!0),this.contentPrev.innerHTML="",this.contentNext.innerHTML="";let e="",t=Math.floor(a/10)*10;for(let r=-1;r<=1;r++){let d=t+10*r;e+=`
        <ol class="socalendar-year-picker">
          ${Array.from({length:10},(u,o)=>{let h=d+o;return`
              <li>
                <button type="button" class="socalendar-button ${this.year===h?"selected":""} socalendar-select-year" data-year="${h}">
                  ${h}
                </button>
              </li>
            `}).join("")}
        </ol>
      `}this.contentCurrent.innerHTML=`
      <div class="socalendar-year-picker-container">
        <div class="socalendar-year-picker-scroller socalendar-row">
          <button type="button" id="soCalendar-decade-prev">${this.iconPreviousDecade}</button>
          <span class="socalendar-year-picker-label" id="soCalendar-year-picker-label">
            <span class="year-value">${t}</span> 
            <svg class="separator" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"></path></svg>
            <span class="year-value">${t+9}</span>
          </span>
          <button type="button" id="soCalendar-decade-next">${this.iconNextDecade}</button>
        </div>
        <div class="socalendar-year-picker-wrapper">
          <div class="socalendar-year-picker-inner" id="soCalendar-year-picker-inner">
            ${e}
          </div>
        </div>
      </div>
    `;let n=document.getElementById("soCalendar-year-picker-inner"),s=document.getElementById("soCalendar-decade-prev"),l=document.getElementById("soCalendar-decade-next");s.addEventListener("click",()=>{n.addEventListener("transitionend",()=>{n.classList.remove("next","prev"),this.year-=10,this.generateYearPicker(t-10)}),n.classList.add("prev")}),l.addEventListener("click",()=>{n.addEventListener("transitionend",()=>{n.classList.remove("next","prev"),this.year+=10,this.generateYearPicker(t+10)}),n.classList.add("next")}),this.dialog.querySelectorAll("#soCalendar button.socalendar-select-year").forEach(r=>{r.addEventListener("click",d=>{let u=d.currentTarget;if(u instanceof HTMLButtonElement){let o=Number(u.dataset.year);o&&(this.year=o,this.updateYearLabel(),this.generateMonthPicker())}})})}generateMonthPicker(){this.dialog.dataset.socalendarView="month",this.content.classList.remove("next","prev"),this.toggleElements(["soCalendar-back","soCalendar-edit"],!1),this.toggleElements(["soCalendar-footer","soCalendar-prev-year","soCalendar-prev-month","soCalendar-next-month","soCalendar-next-year"],!0),this.contentCurrent.innerHTML=`<ol class="socalendar-month-picker">
      ${[0,1,2,3,4,5,6,7,8,9,10,11].map(e=>`
        <li>
          <button type="button" class="socalendar-button soCalendar-select-month" data-month="${e}">
            ${this.getMonthName(e,"long")}
          </button>
        </li>
      `).join("")}
    </ol>
    `,this.dialog.querySelectorAll("#soCalendar button.soCalendar-select-month").forEach(e=>{e.addEventListener("click",t=>{let n=t.currentTarget;if(n instanceof HTMLButtonElement){console.log("buttn ok");let s=Number(n.dataset.month);console.log(s),s&&(this.month=s,this.updateMonthLabel(),this.generateDatePicker())}})})}generateDatePicker(){this.dialog.dataset.socalendarView="date",this.content.classList.remove("next","prev"),this.toggleElements(["soCalendar-back","soCalendar-edit"],!0),this.toggleElements(["soCalendar-footer","soCalendar-prev-year","soCalendar-prev-month","soCalendar-next-month","soCalendar-next-year"],!1);let a=this.today.getFullYear(),e=this.today.getMonth(),t=this.today.getDate(),n=[this.contentPrev,this.contentCurrent,this.contentNext];for(let l=-1;l<=1;l++){let c=new Date(this.year,this.month+l,1),r=c.getFullYear(),d=c.getMonth(),u=new Date(r,d,1),o=this.daysInMonth(r,d),h=u.getDay();this.weekStartsOnMonday&&(h=(h+6)%7);let y=new Date(r,d-1,1),M=y.getMonth(),L=y.getFullYear(),E=this.daysInMonth(L,M),x=42,w=[];for(let g=0;g<x;g++){let m,i=d,p=r,b=!1;if(g<h)m=E-h+g+1,i=M,p=L,b=!0;else if(g>=h+o){let C=new Date(r,d+1,1);m=g-(h+o)+1,i=C.getMonth(),p=C.getFullYear(),b=!0}else m=g-h+1;let k=new Date(p,i,m),B=!b&&m===t&&i===e&&p===a,T=this.date.getTime()===k.getTime(),Y=this.minDate&&new Date(p,i,m)<this.minDate||this.maxDate&&new Date(p,i,m)>this.maxDate,H=this.minDate instanceof Date&&new Date(p,i,m).getTime()===this.minDate.getTime(),$=this.maxDate instanceof Date&&new Date(p,i,m).getTime()===this.maxDate.getTime();w.push({day:m,month:i,year:p,outside:b,isToday:B,isCurrent:T,isDisabled:Y,isMinDate:H,isMaxDate:$})}n[l+1].innerHTML=`
        <table class="socalendar-date-picker" cellpadding="0" cellspacing="0">
          <caption class="socalendar-visually-hidden">
            ${this.getMonthName(d,"long")} ${r}
          </caption>
          <tr>
            ${[0,1,2,3,4,5,6].map(g=>`
              <th>${this.getWeekDay(g)}</th>
            `).join("")}
          </tr>
          ${[0,1,2,3,4,5].map(g=>`<tr>
              ${[0,1,2,3,4,5,6].map(m=>{let i=w[g*7+m],p=`${i.day} ${this.getMonthName(i.month,"long")} ${i.year}`,b=["socalendar-button","soCalendar-select-date",i.outside?"is-outside-month":"",i.isToday?"is-today":"",i.isCurrent?"is-current":"",i.isMinDate?"is-min-date":"",i.isMaxDate?"is-max-date":""].filter(Boolean).join(" ");return`
                  <td>
                    <button
                      aria-label="${p}"
                      type="button"
                      class="${b}"
                      data-year="${i.year}"
                      data-month="${i.month}"
                      data-day="${i.day}"
                      ${i.isDisabled?"disabled":""}
                    >
                      ${i.day}
                    </button>
                  </td>
                `}).join("")}
            </tr>`).join("")}
        </table>
      `}this.updateDate(),this.dialog.querySelectorAll("#soCalendar button.soCalendar-select-date").forEach(l=>{l.addEventListener("click",c=>{let r=c.currentTarget;if(r instanceof HTMLButtonElement){let d=r.dataset.year,u=r.dataset.month,o=r.dataset.day;d&&u&&o&&this.setDate(new Date(Number(d),Number(u),Number(o)))}})})}};return F(Z);})();
